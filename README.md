# 小霸王 SB-486

小霸王學習機，機械鍵盤，山寨口字軸。

並聯一塊 RP2040 主控當鍵盤用。

## 鍵盤佈局

https://www.keyboard-layout-editor.com/##@@=Power&_x:1%3B&=F1&=F2&=F3&=F4&_x:0.5%3B&=F5&=F6&=F7&=F8&_x:4.75%3B&=Pause&=Break&=Reset%3B&@_y:0.5%3B&=Esc&=!%0A1&=%2F@%0A2&=%23%0A3&=$%0A4&=%25%0A5&=%5E%0A6&=%2F&%0A7&=*%0A8&=(%0A9&=)%0A0&=%2F_%0A-&=+%0A%2F=&=%7C%0A%5C&=%E2%86%90&_x:0.25%3B&=Ins&=Home&=PgUp%3B&@_w:1.5%3B&=Tab&=Q&=W&=E&=R&=T&=Y&=U&=I&=O&=P&=%7B%0A%5B&=%7D%0A%5D&_w:1.5&h:2&w2:2.25&h2:1&x2:-0.75&y2:1%3B&=Enter&_x:0.25%3B&=Del&=End&=PgDn%3B&@_w:1.75%3B&=Caps&=A&=S&=D&=F&=G&=H&=J&=K&=L&=%2F:%0A%2F%3B&=%22%0A'%3B&@_w:2.25%3B&=Shift&=Z&=X&=C&=V&=B&=N&=M&=%3C%0A,&=%3E%0A.&=%3F%0A%2F%2F&_w:2.75%3B&=Shift&_x:1.25%3B&=%E2%86%91%3B&@_w:1.5%3B&=Ctrl&_x:1&w:1.5%3B&=Alt&_a:7&w:7%3B&=&_a:4&w:1.5%3B&=Alt&_x:1&w:1.5%3B&=Ctrl&_x:0.25%3B&=%E2%86%90&=%E2%86%93&=%E2%86%92

## 改造步驟

機殼內部有鍵盤電路板和用螺絲固定在底部的<del>遊戲</del>學習機電路板，二者用兩組排線連接。

RP2040主控，每個 GPIO 引腳串聯 1kΩ 電阻，再接入鍵盤矩陣電路。

### 8 條行線

鍵盤電路板上的 74LS157 芯片，以下引腳爲輸入端

Pin 2, 3, 5, 6, 10, 11, 13, 14

### 9 條列線

鍵盤電路板上的 GD4017B 芯片，輸出 Q0 - Q9 依次爲

Pin 3, 2, 4, 7, 10, 1, 5, 6, 9, 11

其中 Pin 11 斷路不用。
其他引腳用作行線，接二極管，方向是芯片→軸。

## 矩陣定義

鍵盤共 80 鍵。左上角 Power 鍵（自鎖開關），右上角 Reset 鍵，二者不在鍵盤矩陣中。

其他 78 鍵只有 8 × 9 = 72 個獨立鍵位。以下每組鍵共用一個的矩陣座標：

  - Tab、空格
  - 左 Shift、右 Shift
  - 左 Ctrl、右 Ctrl
  - 左 Alt、右 Alt、End
  - Pause、Break
  
https://www.keyboard-layout-editor.com/##@@_a:7%3B&=&_x:1&a:4%3B&=1,1&=1,0&=1,8&=1,6&_x:0.5%3B&=1,3&=1,7&=1,5&=1,2&_x:4.75%3B&=7,4&=7,4&_a:7%3B&=%3B&@_y:0.5&a:4%3B&=1,4&=4,4&=0,1&=4,1&=0,0&=4,0&=4,8&=0,6&=4,6&=0,3&=4,3&=0,7&=4,7&=4,5&=2,2&_x:0.25%3B&=0,2&=6,2&=3,2%3B&@_w:1.5%3B&=7,8&=0,4&=3,1&=3,0&=3,8&=0,8&=2,6&=3,6&=2,3&=3,3&=3,7&=3,5&=0,5&_w:1.5&h:2&w2:2.25&h2:1&x2:-0.75&y2:1%3B&=2,5&_x:0.25%3B&=4,2&=7,1&=5,2%3B&@_w:1.75%3B&=2,4&=3,4&=5,1&=2,1&=5,0&=2,0&=2,8&=6,6&=5,6&=5,3&=2,7&=5,7%3B&@_w:2.25%3B&=6,7&=5,4&=6,1&=7,0&=6,0&=6,8&=5,8&=7,6&=7,3&=6,3&=7,7&_w:2.75%3B&=6,7&_x:1.25%3B&=5,5%3B&@_w:1.5%3B&=6,4&_x:1&w:1.5%3B&=7,1&_w:7%3B&=7,8&_w:1.5%3B&=7,1&_x:1&w:1.5%3B&=6,4&_x:0.25%3B&=7,5&=6,5&=7,2
